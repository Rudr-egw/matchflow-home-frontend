<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>MatchFlow ‚Äî Request Help</title>

  <style>
    :root{
      --bg:#0b0d10;
      --card: rgba(18,22,30,.86);
      --line:#232a34;
      --text:#eef2f7;
      --muted:#a7b0bd;
      --accent:#6ea8ff;
      --accent2:#7cf7c6;
      --shadow: 0 20px 70px rgba(0,0,0,.5);
      --radius:18px;
    }

    *{box-sizing:border-box}
    body{
      margin:0;
      min-height:100vh;
      background:
        radial-gradient(900px 500px at 50% 15%, rgba(110,168,255,.22), transparent 55%),
        radial-gradient(700px 420px at 25% 90%, rgba(124,247,198,.14), transparent 60%),
        var(--bg);
      color:var(--text);
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:22px;
    }

    .shell{
      width:min(980px, 100%);
      display:grid;
      grid-template-columns: 360px 1fr;
      gap:14px;
    }

    @media (max-width: 900px){
      .shell{ grid-template-columns: 1fr; }
    }

    .panel{
      background: var(--card);
      border:1px solid var(--line);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow:hidden;
    }

    /* LEFT */
    .left{ padding:18px; }
    .brand{ display:flex; align-items:center; gap:10px; margin-bottom:12px; }
    .logo{
      width:36px;height:36px;border-radius:12px;
      background: linear-gradient(135deg, rgba(110,168,255,.9), rgba(124,247,198,.85));
      box-shadow: 0 12px 30px rgba(110,168,255,.22);
    }
    .brand h1{ margin:0; font-size:16px; letter-spacing:.2px; }
    .brand p{ margin:2px 0 0; font-size:12px; color:var(--muted); }

    .trust{
      margin-top:14px;
      border-top:1px solid var(--line);
      padding-top:14px;
      display:grid;
      gap:10px;
    }
    .trustItem{
      display:flex;
      gap:10px;
      align-items:flex-start;
      padding:10px 12px;
      border:1px solid rgba(255,255,255,.06);
      border-radius:14px;
      background: rgba(0,0,0,.18);
    }
    .check{
      width:18px;height:18px;border-radius:6px;
      background: rgba(124,247,198,.14);
      border:1px solid rgba(124,247,198,.35);
      display:flex;align-items:center;justify-content:center;
      flex: 0 0 auto;
      margin-top:1px;
    }
    .check::before{
      content:"‚úì";
      color: var(--accent2);
      font-weight:700;
      font-size:12px;
      line-height:1;
    }
    .trustItem b{ display:block; font-size:13px; margin-bottom:2px; }
    .trustItem span{ display:block; font-size:12px; color:var(--muted); line-height:1.3; }

    .micro{
      margin-top:14px;
      font-size:12px;
      color:var(--muted);
      line-height:1.35;
    }

    /* RIGHT */
    .right{
      display:flex;
      flex-direction:column;
      height: min(78vh, 720px);
      min-height: 560px;
    }

    .topbar{
      padding:14px 16px;
      border-bottom:1px solid var(--line);
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
    }

    .titleWrap{ display:flex; flex-direction:column; gap:2px; min-width:0; }
    .title{ font-size:14px; margin:0; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
    .subtitle{ font-size:12px; color:var(--muted); margin:0; }

    .pill{
      font-size:12px;
      color:rgba(255,255,255,.86);
      border:1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.22);
      padding:7px 10px;
      border-radius:999px;
      display:flex;
      align-items:center;
      gap:8px;
      user-select:none;
      white-space:nowrap;
    }
    .dotLive{
      width:8px;height:8px;border-radius:50%;
      background: var(--accent2);
      box-shadow: 0 0 0 4px rgba(124,247,198,.12);
      animation: pulse 1.8s infinite ease-in-out;
    }
    @keyframes pulse{
      0%,100%{ transform:scale(1); opacity:1;}
      50%{ transform:scale(.82); opacity:.7;}
    }

    .chat{
      flex:1;
      padding:16px;
      overflow:auto;
      display:flex;
      flex-direction:column;
      gap:10px;
      scroll-behavior:smooth;
    }

    .msgRow{
      display:flex;
      gap:10px;
      align-items:flex-end;
      animation: pop .22s ease-out;
    }
    @keyframes pop{
      from{ transform: translateY(6px); opacity:0;}
      to{ transform: translateY(0); opacity:1;}
    }

    .avatar{
      width:30px;height:30px;border-radius:12px;
      background: rgba(255,255,255,.06);
      border:1px solid rgba(255,255,255,.10);
      display:flex;align-items:center;justify-content:center;
      color: rgba(255,255,255,.75);
      font-weight:700;
      flex:0 0 auto;
    }
    .avatar.bot{
      background: rgba(110,168,255,.12);
      border-color: rgba(110,168,255,.20);
      color: rgba(110,168,255,.95);
    }

    .bubble{
      max-width: 78%;
      padding:12px 13px;
      border-radius: 16px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.22);
      line-height:1.35;
      font-size:13px;
      color: rgba(255,255,255,.92);
      white-space:pre-wrap;
    }

    .typing{
      display:inline-flex;
      gap:6px;
      align-items:center;
    }
    .typing i{
      width:7px;height:7px;border-radius:50%;
      background: rgba(255,255,255,.75);
      display:inline-block;
      animation: bounce 1s infinite ease-in-out;
    }
    .typing i:nth-child(2){animation-delay:.12s}
    .typing i:nth-child(3){animation-delay:.24s}
    @keyframes bounce{
      0%,100%{ transform: translateY(0); opacity:.55;}
      50%{ transform: translateY(-4px); opacity:1;}
    }

    /* Form card inside chat */
    .formWrap{
      width:100%;
      max-width: 78%;
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.22);
      padding: 14px;
      line-height:1.35;
    }
    .formWrap h3{ margin:0 0 8px; font-size:14px; letter-spacing:.2px; }
    .formWrap p{ margin:0 0 12px; color: var(--muted); font-size:12px; }

    form .field{
      display:flex;
      flex-direction:column;
      gap:6px;
      margin-bottom:10px;
    }
    form label{ font-size:12px; color: rgba(255,255,255,.82); }
    form input, form textarea{
      width:100%;
      background: rgba(0,0,0,.25);
      border:1px solid rgba(255,255,255,.12);
      border-radius: 12px;
      padding: 10px 10px;
      color: var(--text);
      outline:none;
      font-size:13px;
    }
    form textarea{ min-height: 110px; resize: vertical; }

    .smallRow{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:10px;
    }
    @media (max-width: 520px){
      .bubble, .formWrap{ max-width: 100%; }
      .smallRow{ grid-template-columns: 1fr; }
    }

    .btn{
      border:1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.06);
      color:rgba(255,255,255,.92);
      padding:11px 14px;
      border-radius: 14px;
      cursor:pointer;
      font-weight:650;
      font-size:13px;
      transition: transform .12s ease, background .12s ease;
      user-select:none;
      white-space:nowrap;
    }
    .btn:hover{ transform: translateY(-1px); background: rgba(255,255,255,.09);}
    .btn.primary{
      background: linear-gradient(135deg, rgba(110,168,255,.85), rgba(124,247,198,.72));
      border: none;
      color:#0b0d10;
      font-weight:800;
      width:100%;
    }

    .note{
      font-size:11px;
      color: rgba(167,176,189,.9);
      margin-top:10px;
    }

    .status{
      display:flex;
      align-items:center;
      gap:10px;
      margin-top:10px;
      font-size:12px;
      color: rgba(167,176,189,.95);
    }
    .spinner{
      width:16px;height:16px;border-radius:50%;
      border:2px solid rgba(255,255,255,.18);
      border-top-color: rgba(124,247,198,.85);
      animation: spin .8s linear infinite;
    }
    @keyframes spin{ to{ transform: rotate(360deg); } }

    .ok{
      display:inline-flex;
      gap:8px;
      align-items:center;
      font-size:12px;
      color: rgba(124,247,198,.9);
      margin-top:10px;
    }
    .ok::before{
      content:"‚úì";
      width:18px;height:18px;border-radius:6px;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      background: rgba(124,247,198,.12);
      border: 1px solid rgba(124,247,198,.30);
      color: rgba(124,247,198,.95);
      font-weight:900;
      font-size:12px;
    }
  </style>
</head>

<body>
  <div class="shell">
    <!-- LEFT -->
    <section class="panel left">
      <div class="brand">
        <div class="logo"></div>
        <div>
          <h1>MatchFlow</h1>
          <p>Neighborhood help, without the hassle.</p>
        </div>
      </div>

      <div class="trust">
        <div class="trustItem">
          <div class="check"></div>
          <div>
            <b>Fast matching</b>
            <span>We route your request to the right local pros.</span>
          </div>
        </div>
        <div class="trustItem">
          <div class="check"></div>
          <div>
            <b>Quality-first</b>
            <span>We prioritize higher-rated providers and good availability.</span>
          </div>
        </div>
        <div class="trustItem">
          <div class="check"></div>
          <div>
            <b>Clear expectations</b>
            <span>Pros reply with quote ranges after reviewing your details.</span>
          </div>
        </div>
      </div>

      <div class="micro">
        <b style="color:rgba(255,255,255,.9)">Tip:</b> A short description is perfect ‚Äî ‚Äúleaky sink‚Äù or ‚Äúneed deep clean‚Äù.
      </div>
    </section>

    <!-- RIGHT -->
    <section class="panel right">
      <header class="topbar">
        <div class="titleWrap">
          <p class="title" id="chatTitle">Request Help</p>
          <p class="subtitle" id="chatSub">Submit your request ‚Äî we‚Äôll take it from there.</p>
        </div>
        <div class="pill"><span class="dotLive"></span> Online</div>
      </header>

      <main class="chat" id="chat"></main>
    </section>
  </div>

  <script>
    const chat = document.getElementById("chat");

    function scrollToBottom(){ chat.scrollTop = chat.scrollHeight; }

    function addBubble(text, who="bot"){
      const row = document.createElement("div");
      row.className = "msgRow";

      const avatar = document.createElement("div");
      avatar.className = "avatar " + (who === "bot" ? "bot" : "");
      avatar.textContent = who === "bot" ? "M" : "U";

      const bubble = document.createElement("div");
      bubble.className = "bubble";
      bubble.textContent = text;

      row.appendChild(avatar);
      row.appendChild(bubble);
      chat.appendChild(row);
      scrollToBottom();
    }

    function addTyping(){
      const row = document.createElement("div");
      row.className = "msgRow";

      const avatar = document.createElement("div");
      avatar.className = "avatar bot";
      avatar.textContent = "M";

      const bubble = document.createElement("div");
      bubble.className = "bubble";
      bubble.innerHTML = `<span class="typing"><i></i><i></i><i></i></span>`;

      row.appendChild(avatar);
      row.appendChild(bubble);
      chat.appendChild(row);
      scrollToBottom();
      return row;
    }

    function escapeHtml(str){
      return String(str || "")
        .replaceAll("&","&amp;")
        .replaceAll("<","&lt;")
        .replaceAll(">","&gt;")
        .replaceAll('"',"&quot;")
        .replaceAll("'","&#039;");
    }

    async function botSay(text){
      const typingRow = addTyping();
      await new Promise(r => setTimeout(r, 650));
      typingRow.remove();
      addBubble(text, "bot");
    }

    function addFormCard(){
      const row = document.createElement("div");
      row.className = "msgRow";

      const avatar = document.createElement("div");
      avatar.className = "avatar bot";
      avatar.textContent = "M";

      const wrap = document.createElement("div");
      wrap.className = "formWrap";

      wrap.innerHTML = `
        <h3>Request form</h3>
        <p>Fill this out and hit submit. We‚Äôll review it and follow up with the closest quote ranges we can get.</p>

        <form id="leadForm">
          <div class="smallRow">
            <div class="field">
              <label>Your name</label>
              <input name="name" type="text" required placeholder="First name" />
            </div>
            <div class="field">
              <label>Your email</label>
              <input name="email" type="email" required placeholder="you@email.com" />
            </div>
          </div>

          <div class="smallRow">
            <div class="field">
              <label>Phone number</label>
              <input name="phone" type="tel" required placeholder="(###) ###-####" />
            </div>
            <div class="field">
              <label>ZIP code</label>
              <input name="zip" type="text" required placeholder="30024" />
            </div>
          </div>

          <div class="smallRow">
            <div class="field">
              <label>Service needed</label>
              <input name="service" type="text" required placeholder="Plumbing / Cleaning / Electrical‚Ä¶" />
            </div>
            <div class="field">
              <label>Urgency</label>
              <input name="urgency" type="text" required placeholder="Emergency / Soon / Flexible" />
            </div>
          </div>

          <div class="field">
            <label>What‚Äôs the situation?</label>
            <textarea name="message" required placeholder="Tell us what you need done‚Ä¶"></textarea>
          </div>

          <button class="btn primary" id="submitBtn" type="submit">Submit request</button>

          <div class="note">
            Pricing is quote-based. We‚Äôll work to find options closest to your goal after businesses review the details.
          </div>

          <div class="status" id="status" style="display:none;">
            <span class="spinner"></span>
            <span id="statusText">Sending your request‚Ä¶</span>
          </div>
        </form>
      `;

      row.appendChild(avatar);
      row.appendChild(wrap);
      chat.appendChild(row);
      scrollToBottom();

      wireForm();
    }

    function wireForm(){
      const form = document.getElementById("leadForm");
      const status = document.getElementById("status");
      const statusText = document.getElementById("statusText");
      const submitBtn = document.getElementById("submitBtn");

      form.addEventListener("submit", async (e) => {
        e.preventDefault();

        // Show sending animation in the form card
        status.style.display = "flex";
        statusText.textContent = "Sending your request‚Ä¶";
        submitBtn.disabled = true;
        submitBtn.style.opacity = .75;

        const formData = new FormData(form);

        // helpful hidden fields
        formData.append("source", "MatchFlow Chat Form");
        formData.append("timestamp", new Date().toISOString());

        try {
          const resp = await fetch("https://formspree.io/f/mbdogolb", {
            method: "POST",
            body: formData,
            headers: { "Accept": "application/json" }
          });

          if (!resp.ok) throw new Error("Submit failed");

          // Keep the chat feel: add a confirmation bubble + tiny pause
          await botSay("Got it ‚úÖ Submitting and opening your request‚Ä¶");
          await botSay("Hang tight ‚Äî we‚Äôre setting everything up now.");

          // Small delay so it feels intentional
          await new Promise(r => setTimeout(r, 500));

          // Go to your processing page
          window.location.href = "processing.html";

        } catch (err) {
          statusText.textContent = "Something went wrong. Please try again.";
          submitBtn.disabled = false;
          submitBtn.style.opacity = 1;
        }
      });
    }

    // Init flow (chat-like intro, then form)
    (async function(){
      await botSay("Welcome to MatchFlow üëã");
      await botSay("This is a quick request form ‚Äî once you submit, we‚Äôll contact local providers for quote ranges.");
      await botSay("You‚Äôll go to a short processing screen after submit.");
      addFormCard();
    })();
  </script>
</body>
</html>
